<!DOCTYPE html>
<html>
<head>
	<title>url obfuscator</title>
</head>
<style type="text/css">
	p,b{
		text-align: center;

	}

	input{
		text-align: left;
	}
</style>
<script>
if (typeof String.prototype.startsWith != 'function'){
	String.prototype.startsWith = function(str) {
		return this.substring(0, str.length) === str;
	}
};



function getload() {
	var t = getQueryVariable("url");
	if (t == -1) {
		console.log("added elements");
		var element = document.getElementById("infodiv");
		
		var title = document.createElement("b");
		var node = document.createTextNode("URL Obfuscator");
		title.appendChild(node);

		var para = document.createElement("p");
		var node = document.createTextNode("Ever needed to send a url without the other person knowing what the site is? Now you can!");
		para.appendChild(node);

		var inputn = document.createElement("input");
		inputn.id = "inputname";
		inputn.placeholder = "URL";
		inputn.onkeydown = "getinput";

		var finalsave = document.createElement("p");
		var finalsavenode = document.createTextNode("");
		finalsave.id = "finalsave";
		finalsave.appendChild(finalsavenode);



		element.appendChild(title);
		element.appendChild(para);
		element.appendChild(inputn);
		element.appendChild(finalsave);

	}else{
		console.log("redirect");
		var sending = "http://"+t;
		window.location.assign(sending);
	}
}

function getinput(){
	var val = document.getElementById("inputname").value;
	if(val.startsWith("http://")){
		alert("NOOOOOO");
	}else{
		alert("YES! NO HTTP");
	}
}

function convertText(inputText){
	var finaltext = "";
	for (var i = 0; i < inputText.length; i++) {
		finaltext += inputText.charCodeAt(i)+1;
	};
	return finaltext;
}

function getQueryVariable(variable){
  var query = window.location.search.substring(1); 
  console.log(query)
  var vars = query.split("&"); 
  console.log(vars)
  //file:///Users/jspann/Github%20Projects/jspann.github.io/redir/index.html?milk=sarah&julia=mean
  for (var i=0;i<vars.length;i++){ 
    var pair = vars[i].split("="); 
    if (pair[0] == variable){ 
      return pair[1]; 
    } 
  }
  return -1; //not found 
}
</script>
<body onload="getload()">
	<div id="infodiv"></div>
</body>
</html>